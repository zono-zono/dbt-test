version: 2

models:
  - name: dim_ga__users
    description: "Dimension table for GA users with comprehensive user metrics and segmentation"
    columns:
      - name: user_pseudo_id
        description: "A pseudo ID for the user"
        tests:
          - not_null
          - unique
      - name: first_seen_date
        description: "The first date the user was seen"
        tests:
          - not_null
      - name: last_seen_date
        description: "The last date the user was seen"
        tests:
          - not_null
      - name: active_days
        description: "Number of days the user was active"
        tests:
          - not_null
      - name: total_sessions
        description: "Total number of sessions for the user"
        tests:
          - not_null
      - name: total_revenue
        description: "Total revenue generated by the user"
      - name: user_segment
        description: "User segment based on behavior (Customer, Potential Customer, etc.)"
        tests:
          - not_null
          - accepted_values:
              values: ['Customer', 'Potential Customer', 'Interested User', 'Casual User']
      - name: engagement_level
        description: "User engagement level (High, Medium, Low, Single Session)"
        tests:
          - not_null
          - accepted_values:
              values: ['High Engagement', 'Medium Engagement', 'Low Engagement', 'Single Session']
      - name: value_segment
        description: "User value segment based on revenue"
        tests:
          - not_null
          - accepted_values:
              values: ['High Value', 'Medium Value', 'Low Value', 'No Purchase']
      - name: frequency_segment
        description: "User frequency segment based on active days"
        tests:
          - not_null
          - accepted_values:
              values: ['Frequent User', 'Regular User', 'Occasional User', 'One-time User']

  - name: fct_ga__daily_metrics
    description: "Fact table with daily aggregated metrics for GA data"
    columns:
      - name: event_date
        description: "The date for the metrics"
        tests:
          - not_null
          - unique
      - name: total_sessions
        description: "Total number of sessions for the day"
        tests:
          - not_null
      - name: unique_users
        description: "Number of unique users for the day"
        tests:
          - not_null
      - name: total_page_views
        description: "Total page views for the day"
        tests:
          - not_null
      - name: total_purchases
        description: "Total purchases for the day"
      - name: total_revenue
        description: "Total revenue for the day"
      - name: bounce_rate
        description: "Bounce rate for the day (0-1)"
        tests:
          - not_null
      - name: conversion_rate
        description: "Conversion rate for the day (0-1)"
        tests:
          - not_null

  - name: fct_ga__traffic_source_performance
    description: "Fact table with traffic source performance metrics and rankings"
    columns:
      - name: session_traffic_source_name
        description: "Name of the traffic source"
        tests:
          - not_null
      - name: session_traffic_source_medium
        description: "Medium of the traffic source"
        tests:
          - not_null
      - name: session_traffic_source_source
        description: "Source of the traffic source"
        tests:
          - not_null
      - name: total_sessions
        description: "Total sessions from this traffic source"
        tests:
          - not_null
      - name: total_revenue
        description: "Total revenue from this traffic source"
      - name: conversion_rate
        description: "Conversion rate for this traffic source (0-1)"
        tests:
          - not_null
      - name: bounce_rate
        description: "Bounce rate for this traffic source (0-1)"
        tests:
          - not_null
      - name: overall_performance_score
        description: "Overall performance score (0-100)"
        tests:
          - not_null
      - name: performance_tier
        description: "Performance tier classification"
        tests:
          - not_null
          - accepted_values:
              values: ['Top Performer', 'Good Performer', 'Average Performer', 'Below Average', 'Poor Performer']
